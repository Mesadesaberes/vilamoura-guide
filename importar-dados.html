<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <title>Importar Dados - Vilamoura Select</title>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f4f7f9; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #003366; }
        .btn { padding: 12px 24px; background: #003366; color: white; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px; font-size: 14px; }
        .btn:hover { background: #004080; }
        .btn-danger { background: #dc3545; }
        .btn-danger:hover { background: #c82333; }
        .success { background: #d4edda; color: #155724; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .error { background: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .warning { background: #fff3cd; color: #856404; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .category { margin: 20px 0; padding: 20px; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #003366; }
        .category h2 { color: #003366; margin-top: 0; }
        .note { font-size: 12px; color: #666; margin-top: 5px; font-style: italic; }
        .business-list { font-size: 13px; margin: 10px 0; padding-left: 20px; }
        .business-list li { margin: 5px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“¥ Importar Dados para Firebase</h1>
        <p class="note">Nota: As fotos jÃ¡ estÃ£o configuradas com URLs do Blogger.</p>
        
        <div id="messages"></div>
        
        <div class="category">
            <h2>ğŸš— Transportes (3 negÃ³cios)</h2>
            <ul class="business-list">
                <li>âœ… Taxis Vilamoura</li>
                <li>âœ… EVA Transportes</li>
                <li>âœ… Faro Airport Transfers</li>
            </ul>
            <p class="note">âŒ Vilamoura Taxi serÃ¡ removido (duplicado)</p>
            <button class="btn" onclick="importTransportes()">Importar Transportes</button>
        </div>
        
        <div class="category">
            <h2>ğŸ¯ ExperiÃªncias & Atividades (8 negÃ³cios)</h2>
            <ul class="business-list">
                <li>âœ… Algarve Cave Tours</li>
                <li>âœ… Watersports Centre</li>
                <li>âœ… Dreams Cruises</li>
                <li>âœ… Baja Bikes</li>
                <li>âœ… Bike-a-Wish</li>
                <li>âœ… Avalanche Bikes</li>
                <li>âœ… Vilamoura Fishing</li>
                <li>âœ… Centro HÃ­pico Vilamoura</li>
            </ul>
            <p class="note">âŒ Duplicados serÃ£o removidos</p>
            <button class="btn" onclick="importExperiencias()">Importar ExperiÃªncias</button>
        </div>
        
        <div class="category">
            <h2>ğŸ“Š Verificar Dados</h2>
            <button class="btn" onclick="checkData()">Verificar ColeÃ§Ã£o 'locais'</button>
        </div>
        
        <div class="category">
            <h2>ğŸ—‘ï¸ Limpar Duplicados</h2>
            <p>Estes negÃ³cios serÃ£o removidos (nomes duplicados):</p>
            <ul class="business-list">
                <li>âŒ Vilamoura Taxi</li>
                <li>âŒ Centro HÃ­pico (manter: Centro HÃ­pico Vilamoura)</li>
                <li>âŒ Baja Bikes Vilamoura (manter: Baja Bikes)</li>
                <li>âŒ Avalanche Algarve (manter: Avalanche Bikes)</li>
                <li>âŒ Bike-a-Wish Tours (manter: Bike-a-Wish)</li>
                <li>âŒ Vilamoura Watersports (manter: Watersports Centre)</li>
            </ul>
            <button class="btn btn-danger" onclick="cleanDuplicates()">Remover Duplicados</button>
        </div>
        
        <div class="category">
            <h2>ğŸ”„ Importar Tudo de Uma Vez</h2>
            <button class="btn" onclick="importAll()">Importar Transportes + ExperiÃªncias</button>
        </div>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDfUDqEJxVnWbQgn6LEVQAjlKeBJdp0vyY",
            authDomain: "vilamoura-select.firebaseapp.com",
            projectId: "vilamoura-select",
            storageBucket: "vilamoura-select.firebasestorage.app",
            messagingSenderId: "189990454398",
            appId: "1:189990454398:web:3d9eac9cf3a84b0510c42f"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // ğŸš— TRANSPORTES - 3 negÃ³cios (sem Vilamoura Taxi)
        const transportes = [
            {
                nome: "Taxis Vilamoura",
                cat: "transportes",
                icon: "ğŸš•",
                info: { pt: "ServiÃ§o de tÃ¡xis local. DisponÃ­vel 24 horas.", en: "Local taxi service. Available 24 hours." },
                tel: "+351915688249",
                web: "https://taxisvilamoura.com",
                lat: 37.0765,
                lng: -8.1175,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEjbXk26jpw3pHOW0oM2gN3x1epO0280t0zGOe3c4D3HkbcDJds0EcCsRiMFj4Fepq7WIg5-4RjpQyQ9HPJgrMtDaHapIryR8DOpTnOObyhbn3RdR8c428STt_dO9pT5gX4gJsCN4MCAV7wDbOhoXna7cq4FEZ6hGjv7PwugRu_1Fc7FI1cai5ZY5dTKfAzV"
            },
            {
                nome: "EVA Transportes",
                cat: "transportes",
                icon: "ğŸšŒ",
                info: { pt: "Autocarros para Faro, Albufeira e LoulÃ©.", en: "Buses to Faro, Albufeira and LoulÃ©." },
                tel: "+351289389143",
                web: "https://eva-bus.com",
                lat: 37.0770,
                lng: -8.1170,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEg63w0o0eXeHKoM0Fe4M_HeZchZceAzoHhaIzeANrXF8aQagqLbegT_p7qci_mSD1j3oygNklL_fZsrkJMsmpkg54u2TcTIBThMWcG_r2SAUX029WYiIjjr4PWguLVk_Bf95MLmud0lVJaHMXxJcU1BjilqebMQ9_f25OQj0d2L53QhRFHRaaVQ5FP_loHJ"
            },
            {
                nome: "Faro Airport Transfers",
                cat: "transportes",
                icon: "ğŸš",
                info: { pt: "Transfers privados aeroporto. AtÃ© 4 pessoas.", en: "Private airport transfers. Up to 4 people." },
                tel: "",
                web: "https://faro-airport-taxis.com",
                lat: 37.0755,
                lng: -8.1185,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEigT1QV92BMQ7WyiPg_GLOhQNqfSd27E8TyIP04LlTXbD3HCsf28c-5I3W6v65Qu8kUBJVQzecSJ4oBgcDhiNE7baRfUUgvke9ejQvfKmLzmBjMI4VpJ-w_4Dqx1K6WtIXTrknrqNzPmbxgbGY2t_sh93qmAU8flTj-ugY9-zEvNr9yvbYN6a_rm5Q4HMpK"
            }
        ];

        // ğŸ¯ EXPERIÃŠNCIAS - 8 negÃ³cios Ãºnicos
        const experiencias = [
            {
                nome: "Algarve Cave Tours",
                cat: "experiencias",
                icon: "ğŸš¤",
                info: { pt: "Passeios de barco Ã s grutas de Benagil.", en: "Boat tours to Benagil caves." },
                tel: "",
                web: "https://algarvecavetours.com",
                lat: 37.0750,
                lng: -8.1190,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEg0r7OsAeJLfa3DiWrHUIj1FiGvPqbMOiKhHqkHQaVBywaFNWonUI-RBgGilga33p35CmDqVcBwoEfdx1ooPdhKCyE6wEU3bWQZzr8pTVwFcDb-RoTg_rm2Dg6Y_lpLnvy4sAnqZoGnyPsG3s52yBLwJXbIOEI9vSz2mrvwtqTVSNCmHNkzEeCr4Qogy3j9"
            },
            {
                nome: "Watersports Centre",
                cat: "experiencias",
                icon: "ğŸ„",
                info: { pt: "Jet ski, parasailing, passeios de barco.", en: "Jet ski, parasailing, boat trips." },
                tel: "",
                web: "https://watersportsalgarve.com",
                lat: 37.0745,
                lng: -8.1195,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEiRI1iWb5t6rEF2_H2izGAPu41WWlVYvHikHYv__pqd6G8hwvh-3P1UcsTBlwsSJjBPIOgp6V6-6Fcc4njvS-XkTYmSpJTvUiEwUU_m_kThxT4f5yOBpVD6AStYjp-tQFYON6vwFH0JWUQxdLKPIpc1ow_rf9DMTnGlTx1G0mD9v2PXaVGzIeVQ6I5tl42b"
            },
            {
                nome: "Dreams Cruises",
                cat: "experiencias",
                icon: "â›µ",
                info: { pt: "Passeios de barco, paddle board, snorkeling.", en: "Boat trips, paddle board, snorkeling." },
                tel: "",
                web: "https://vilamouradreamscruises.com",
                lat: 37.0740,
                lng: -8.1200,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEgisVYcUUFZbbDCHsnJE9WyEnjat_r37GzW5yfgPXIB91fNtUCAS72mEZ44RyJxOI_rXDBHfZOHg48bCauOLU2tdv1x01kmRWxf-fAr7eQpzmfqHVkECWNDD98R_OOjHOfNDRsTETeDq-3UOnrqlS1F-5UNnGwLX9NTaZynzDYe25kquEzrqSyyCh1JXf3N"
            },
            {
                nome: "Baja Bikes",
                cat: "experiencias",
                icon: "ğŸš²",
                info: { pt: "Aluguer de bicicletas. 20â‚¬/dia.", en: "Bike rental. â‚¬20/day." },
                tel: "",
                web: "https://bajabikes.eu",
                lat: 37.0775,
                lng: -8.1165,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEjt67p1KB29sInfiCSEyeqKkEwqZF_KClVvLSaINMiSzwDSR5bUvfcx9BNsxjfPMOFwaKDNcQrLv0MZUs08bP33JTM1jplQP4XuoX69l7StfYAqODcsZtucXmZbllTt8xXVBk8AqFBsdXFq2j9-Jvhp33VK47e8DbSB5tFivtNE6PEBW1VQ0NkCWyLcMlJN"
            },
            {
                nome: "Bike-a-Wish",
                cat: "experiencias",
                icon: "ğŸš´",
                info: { pt: "Tours de bicicleta e aluguer ecolÃ³gico.", en: "Eco-friendly bike tours and rental." },
                tel: "",
                web: "https://bikeawish.com",
                lat: 37.0780,
                lng: -8.1160,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEhfTW71V69kz2FYmLZunVbrorzX24dI0E8I40JWIWbs8B9pBs2hJN_s0NGRii4fmxOwzbyDBWBfh6GrbIee6LvNDrn-6exKmsfOEniYGv24ZHIWg4cYy7IK8iKbgSYW6jQ3pGqxCWuEXmVspW9S9W_xj9Vm2eCRJkPuRRMFwrkJ-4DH-OmVhlmRTs4ST5iu"
            },
            {
                nome: "Avalanche Bikes",
                cat: "experiencias",
                icon: "ğŸšµ",
                info: { pt: "Aluguer de mountain bikes. 15â‚¬/dia.", en: "Mountain bike rental. â‚¬15/day." },
                tel: "",
                web: "https://avalanchealgarve.com",
                lat: 37.0785,
                lng: -8.1155,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEhDVF60YTaGjoK0eSX-Tbb7x1aH1u0Mm_gTDFg1lmT-47UoA10tdSx_RjAeIo0v8mELYbDK50U9gi_-Rn6v9yqJHsig6xkKsZkuDcXxX7Vy4YaoszoFVixMRVd2_c66gZjrWFeHc8yJag997p7mq_pPOrOXK1kcv6sNDQfVFhnRm44dgGyEg0NnNVow3dxe"
            },
            {
                nome: "Vilamoura Fishing",
                cat: "experiencias",
                icon: "ğŸ£",
                info: { pt: "Pesca desportiva. Reef e big game fishing.", en: "Sport fishing. Reef and big game fishing." },
                tel: "",
                web: "",
                lat: 37.0735,
                lng: -8.1205,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEh9kBCdl5DvIW94PPRD0Xf5bbiKmsqaMh6TdwC6YfzPUEKJEQlSN1SBzV1uTomdnfP9XgwsKsR6kS_AJZY154zHYl1t4-t9foKXk-jaIsQsNxwwmblEwUoLRiR2RZdDO6XMr5Y4jjo_ERJWMvhzYroZQ59JRo9Ikkz1El45JaNrP0zX3KtZIYF1Bk2T0-sU"
            },
            {
                nome: "Centro HÃ­pico Vilamoura",
                cat: "experiencias",
                icon: "ğŸ‡",
                info: { pt: "Atividades equestres. Passeios a cavalo.", en: "Equestrian activities. Horse riding tours." },
                tel: "",
                web: "",
                lat: 37.0790,
                lng: -8.1150,
                img: "https://blogger.googleusercontent.com/img/a/AVvXsEglMvApiCsNj2-dIE_75ZjB8AQxQ54YF4nlq2TqMvtOhXxsaqH76_3254wu42F_2r9UAHkQT4v4AijkjV5a4A7ih5r0clbP4_IQgHi7_MzVXYAizsnFAzAYRs5n-ymFLfkKmszhgC94OUKxiweaj52UgBlVCZl1oDWIEQ7tyQbsJxMqgm5tQNa7zf1dLxUw"
            }
        ];

        function showMessage(text, isError = false) {
            const div = document.createElement('div');
            div.className = isError ? 'error' : 'success';
            div.textContent = text;
            document.getElementById('messages').appendChild(div);
            setTimeout(() => div.remove(), 6000);
        }

        async function importTransportes() {
            try {
                let count = 0;
                for (const item of transportes) {
                    await db.collection('locais').add(item);
                    count++;
                }
                showMessage(`âœ… ${count} negÃ³cios de Transportes importados!`);
            } catch (error) {
                showMessage(`âŒ Erro: ${error.message}`, true);
            }
        }

        async function importExperiencias() {
            try {
                let count = 0;
                for (const item of experiencias) {
                    await db.collection('locais').add(item);
                    count++;
                }
                showMessage(`âœ… ${count} negÃ³cios de ExperiÃªncias importados!`);
            } catch (error) {
                showMessage(`âŒ Erro: ${error.message}`, true);
            }
        }

        async function importAll() {
            try {
                let count = 0;
                for (const item of [...transportes, ...experiencias]) {
                    await db.collection('locais').add(item);
                    count++;
                }
                showMessage(`âœ… ${count} negÃ³cios importados no total!`);
            } catch (error) {
                showMessage(`âŒ Erro: ${error.message}`, true);
            }
        }

        async function checkData() {
            try {
                const snapshot = await db.collection('locais').get();
                const transportes = snapshot.docs.filter(d => d.data().cat === 'transportes').length;
                const experiencias = snapshot.docs.filter(d => d.data().cat === 'experiencias').length;
                const total = snapshot.size;
                showMessage(`ğŸ“Š Total: ${total} | Transportes: ${transportes} | ExperiÃªncias: ${experiencias}`);
            } catch (error) {
                showMessage(`âŒ Erro: ${error.message}`, true);
            }
        }

        async function cleanDuplicates() {
            try {
                const snapshot = await db.collection('locais').get();
                const namesToDelete = [
                    'Vilamoura Taxi',
                    'Centro HÃ­pico',
                    'Baja Bikes Vilamoura',
                    'Avalanche Algarve',
                    'Bike-a-Wish Tours',
                    'Vilamoura Watersports'
                ];
                let deleted = 0;
                
                for (const doc of snapshot.docs) {
                    const data = doc.data();
                    if (namesToDelete.includes(data.nome)) {
                        await doc.ref.delete();
                        deleted++;
                        console.log(`Removido: ${data.nome}`);
                    }
                }
                showMessage(deleted > 0 ? `ğŸ—‘ï¸ ${deleted} duplicados removidos!` : 'âœ… Sem duplicados encontrados.');
            } catch (error) {
                showMessage(`âŒ Erro: ${error.message}`, true);
            }
        }
    </script>
</body>
</html>